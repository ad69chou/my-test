<!DOCTYPE html>
<html>
<head>
<meta name="apple-mobile-web-app-title" content="CodePen">

<title>Vue 测试实例 - 菜鸟教程(runoob.com)</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.1.3/cerulean/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.13/css/jquery.dataTables.css">
<link rel="shortcut icon" type="image/x-icon" href="https://cpwebassets.codepen.io/assets/favicon/favicon-aec34940fbc1a6e787974dcd360f2c6b63348d4b1f4e06c77743096d55480f33.ico">
<link rel="mask-icon" type="image/x-icon" href="https://cpwebassets.codepen.io/assets/favicon/logo-pin-8f3771b1072e3c38bd662872f6b673a722f4b3ca2421637d5596661b4e2132cc.svg" color="#111">


<script src="https://cdn.staticfile.net/vue/2.5.17/vue.min.js"></script>
<script src="https://cdn.staticfile.net/vue-resource/1.5.1/vue-resource.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.13/js/jquery.dataTables.min.js"></script>

<!-- https://stackoverflow.com/questions/70456372/how-to-make-this-simple-jquery-popup-modal-with-inside-html-and-bootstrap-to-be -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>


</head>

<body translate="no">
<div id="box" class="container">
	<input type="button" @click="get()" value="点我异步获取数据(Get)">
	<div>
		<button class="btn btn-primary" @click="openNewWindow">Open New Window</button>
	</div>
	
	<div>
		<!-- Button trigger modal -->
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#showModal">Open New Modal</button>
	</div>
	
	<div class="row">
	<div class="col">
	<div id="user-table_wrapper" class="dataTables_wrapper no-footer">	
	
		<table id="user-table" cellspacing="0" width="100%" class="display table-bordered nowrap dataTable no-footer" role="grid" aria-describedby="user-table_info" style="width: 100%;">
		  <thead>
		  <tr role="row">
			  <th class="sorting_asc" tabindex="0" aria-controls="user-table" rowspan="1" colspan="1" aria-label="User ID: activate to sort column descending" aria-sort="ascending" style="width: 55.7778px;">ID</th>
			  <th class="sorting" tabindex="0" aria-controls="user-table" rowspan="1" colspan="1" aria-label="Title: activate to sort column ascending" style="width: 156.778px;">Title</th>
			  <th class="sorting" tabindex="0" aria-controls="user-table" rowspan="1" colspan="1" aria-label="Body: activate to sort column ascending" style="width: 183.778px;">Body</th>
		  </tr>
		  </thead>
		  
		  <tbody>
			  <tr role="row" v-for="x in result">
				<td class="sorting_1">{{ x.id }}</td><td><button @click="say(x.title)">點擊</button><a href="#">{{ x.title }}</a></td><td>{{ x.body }}</td>
			  </tr>
		  </tbody>
		</table>

	</div>
	    <!-- Modal -->
        <div class="modal fade" id="showModal" tabindex="-1" role="dialog" aria-labelledby="showModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <!-- <strong>Oh snap!</strong> Change a few things up and try submitting again. -->
						<h3 class="mt-3">Add User</h3> 
						<hr> 
						<div class="row"><div class="col"><label>ID</label> <input id="ID" type="number" class="form-control"></div> 
							<div class="col"><label>Title</label> <input id="Title" placeholder="Enter new item" type="text" class="form-control"></div> 
							<div class="col"><label>Body</label> <input id="Body" type="text" class="form-control"></div>
						</div> 
						<button class="btn btn-info mt-2" @click="addUser">Add User</button> <hr> 
                    </div>
                </div>
            </div>
        </div>
</div>
</div>
</div>

<script type = "text/javascript" id="rendered-js">
window.onload = function(){

var vm = new Vue({
    el:'#box',
    data:{
        msg:'Hello World!',
		result: ''
    },
	mounted(){
		this.fetchUser();
		//this.initDataTable();
		//$('#showModal').modal();
	},
    methods:{	
	    fetchUser(){
			let users = [];
            this.$http.get('https://jsonplaceholder.typicode.com/posts').then(function(res){
				  var arr  = res.body;
				  arr.slice(0, 5).forEach(item => {
					//users.push(item);
					users.push({"id":item.id,"title":item.title,"body":left10(item.body)});
				  });
				  this.result=users;
				  
				  Vue.nextTick(() => {
					$('#user-table').DataTable();
				  });				  

				  
		})
		},
		initDataTable(){
			$('#user-table').DataTable();
		},
		openNewWindow() {
			const url = 'https://www.example.com'; // Replace with your desired URL
			const windowName = '_blank'; // Opens in a new tab/window
			const windowFeatures = 'width=800,height=600,resizable=yes,scrollbars=yes'; // Optional window features

			window.open(url, windowName, windowFeatures);
		},
        get:function(){
			let users = [];
            this.$http.get('https://jsonplaceholder.typicode.com/posts').then(function(res){
				  var arr  = res.body;
				  arr.forEach(item => {
					//document.write(item.userId);
					//users.push(item);
					users.push({"id":item.id,"title":item.title,"body":item.body});
				  });
				  this.result=users;
				  
				  Vue.nextTick(() => {
					$('#user-table').DataTable();
				  });
            },function(){
                this.result = [];
            });
        },
		addUser() {
			let users = this.result;

			const $ID=$('#ID').val();
			const $Title=$('#Title').val();
			const $Body=$('#Body').val();
			if($ID=="" && $Title=="" & $Body=="" ){
				alert('請確認資料已輸入');
			}
			else{
				users.push({"id":$ID,"title":$Title,"body":$Body});
				this.result=users;
				  
				Vue.nextTick(() => {
					$('#user-table').DataTable();
				});
			}
		},
    }
});
}
</script>
<script setup>
	function say(message) {
	  alert(message);
	}
	
	function left10(str) {
	  return str.substring(0, 10);
	}
</script>
</body>
</html>